<html xmlns:th="https://www.thymeleaf.org">
<head>
    <title>Authenticate</title>
<script src="https://unpkg.com/@simplewebauthn/browser/dist/bundle/index.umd.min.js"></script>
</head>
<body>
<h1>Authenticate</h1>
<button id="authenticate">Authenticate</button>
Success:
<div id="success"></div>
Error:
<div id="error"></div>
<script type="text/javascript" id="registration-script" th:data-csrf-token="${_csrf.token}" th:data-csrf-header-name="${_csrf.headerName}">
  <!--

    // <button>
    const elemBegin = document.getElementById('authenticate');

  // Start authentication when the user clicks a button
  elemBegin.addEventListener('click', async () => {
       const resp = await fetch('/fetch/redirect', {redirect: "manual"});

    console.log(resp.headers)
    console.log(resp.headers.get('Location'))
  });
  //-->
</script>
<a href="/webauthn/register">Register</a> | <a href="/login/webauthn">Authenticate</a> | <a href="/logout">Log Out</a>
</body>
</html>